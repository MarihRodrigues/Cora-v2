<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denúncia</title>
    <link rel="stylesheet" href="paginaDenuncia.css">
</head>

<body>

    <div class="cabecalho">
        <img src="../imagens/logoCora.png" alt="Logo">
        <div class="indice">
            <a href="../home/home.html">Início</a>
            <a href="../profissionais/profissionais.html">Profissionais de Apoio</a>
            <a href="../informativos/informativos.html">Informativos</a>
            <a href="../denuncia/paginaDenuncia.html">Denuncie</a>

            <div class="menu-sanduiche">
                &#9776;
                <div class="menu-opcoes">
                    <a href="../cadastro/cadastroUsuario.html">Cadastre-se</a>
                    <a href="../cadastro/editarCadastro.html">Editar cadastro</a>
                    <a href="#" onclick="excluirConta()">Excluir conta</a>
                    <a href="../login/paginaLogin.html">Entrar</a>
                    <a href="#" onclick="sairConta()">Sair</a>
                </div>

            </div>
        </div>

    </div>

    <form class="formulario" id="formulario">
        <div class="formulario-2">
            <h1>Canais de Denúncia</h1>
            <input class="campo" type="text" id="estado" placeholder="  Estado"><br />
            <input class="campo" type="text" id="cidade" placeholder="  Cidade"><br />

            <select class="campo" id="perfil">
                <option value="">Selecione um perfil</option>
                <option value="usuario">Usuário</option>
                <option value="denunciante">Denunciante</option>
            </select><br />

            <input class="campo" type="number" id="idade" placeholder="  Idade"><br />
            <button class="localizar" type="submit">Localizar</button>
        </div>
    </form>

    <div id="resultado" style="padding: 20px; text-align: center;"></div>

    <script>
            const menu = document.querySelector('.menu-sanduiche');
            const opcoes = document.querySelector('.menu-opcoes');

            // Abre e fecha ao clicar no ícone
            menu.addEventListener('click', function (event) {
                event.stopPropagation(); // impede que o clique propague e feche imediatamente
                opcoes.style.display = opcoes.style.display === 'flex' ? 'none' : 'flex';
            });

            // Fecha se clicar fora do menu
            document.addEventListener('click', function (event) {
                const clicouFora = !menu.contains(event.target);
                if (clicouFora) {
                    opcoes.style.display = 'none';
                }
            });
        </script>

    <script>
        document.getElementById("formulario").addEventListener("submit", function (event) {
            event.preventDefault();

            const estado = document.getElementById("estado").value.trim();
            const cidade = document.getElementById("cidade").value.trim();
            const perfil = document.getElementById("perfil").value;
            const idade = document.getElementById("idade").value.trim();

            // (opcional) checar se campos estão preenchidos
            if (!estado || !cidade || !perfil || !idade) {
                alert("Preencha todos os campos.");
                return;
            }

            // Exibir resultado fixo
            document.getElementById("resultado").innerHTML = `
        <div style="background:#eee; margin:20px auto; padding:20px; border-radius:10px; width:60%;">
          <h2>Polícia Militar</h2>
          <p><strong>Contato:</strong> Ligue <span style="color:red; font-weight:bold;">190</span></p>
        </div>
      `;
        });
    </script>

    <script>
        // Função para sair da conta

        function sairConta() {
            // Remove os dados do usuário armazenados no localStorage
            localStorage.removeItem("usuario");

            // Opcional: limpa todo o localStorage se quiser remover tudo
            // localStorage.clear();

            // Redireciona para a página de login
            window.location.href = "../login/paginaLogin.html";
        }

        function excluirConta() {
            const emailUsuarioLogado = localStorage.getItem("usuarioLogado");

            if (!emailUsuarioLogado) {
                alert("Nenhum usuário logado.");
                return;
            }

            // Confirmação
            const confirmacao = confirm("Tem certeza que deseja excluir sua conta? Essa ação não poderá ser desfeita.");
            if (!confirmacao) return;

            let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

            // Remove o usuário da lista
            usuarios = usuarios.filter(usuario => usuario.email !== emailUsuarioLogado);

            // Atualiza o localStorage
            localStorage.setItem("usuarios", JSON.stringify(usuarios));

            // Remove a sessão do usuário
            localStorage.removeItem("usuarioLogado");

            alert("Conta excluída com sucesso!");

            // Redireciona para a página inicial
            window.location.href = "../index.html";
        }
    </script>

</body>

</html>